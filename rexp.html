<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Expenses</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #f4f7fa;
      color: #333;
    }

    .month-buttons {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      padding: 20px;
      gap: 10px;
    }

    .month-buttons button {
      padding: 10px 20px;
      border: none;
      background-color: #e0e7ff;
      color: #3b3b98;
      font-weight: bold;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .month-buttons button.active {
      background-color: #3b3b98;
      color: #fff;
    }

    .chart-container {
      width: 100%;
      max-width: 2000px;
      margin: 100px auto;
    }

    .sort-container {
      text-align: center;
      margin-top: 10px;
      margin-bottom: 20px;
    }

    .sort-container button {
      padding: 8px 20px;
      background-color: #d1d5db;
      color: #333;
      font-weight: bold;
      border-radius: 6px;
      border: none;
      cursor: pointer;
    }

    .sort-container button.active {
      background-color: #3b3b98;
      color: white;
    }
  </style>
</head>
<body>

<div class="month-buttons" id="monthButtons"></div>

<div class="sort-container">
  <button id="sortToggleBtn">Sort Descending</button>
</div>

<div class="chart-container">
  <canvas id="expensesChart" height="300"></canvas>
</div>

<script>
  const months = [
    "Jan", "Feb", "Mar", "Apr", "May", "Jun",
    "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"
  ];

  const currentMonth = new Date().toLocaleString('default', { month: 'short' });

  const expensesData = {
    "Jan": {
      labels: ["ROOM RENT (NASEEM AHMED)", "ROOM BIJLI BILL (NASEEM AHMED)", "J-15 OFFICE RENT (ROAMIO)", "J-15 OFFICE BIJLI BILL (ROAMIO)", "J-15 OFFICE WIFI (ROAMIO)", "ALKA OFFICE RENT (FAD)", "ALKA OFFICE BIJLI BILL (FAD)", "ALKA OFFICE WIFI (FAD)", "ALKA OFFICE NEWS PAPER (FAD)", "OFFICE EXP (WATER-TEA-COLD DRINK)", "ASAD SALARY", "AREEB SALARY", "FAISAL SALARY", "MAID SALARY", "NASEEM SALARY"],
      data: [0, 0, 13106, 4500, 0, 0, 0, 0, 0, 0, 12000, 15000, 0, 10000, 25000]
    }
    "Feb": {
      labels: ["ROOM RENT (NASEEM AHMED)", "ROOM BIJLI BILL (NASEEM AHMED)", "J-15 OFFICE RENT (ROAMIO)", "J-15 OFFICE BIJLI BILL (ROAMIO)", "J-15 OFFICE WIFI (ROAMIO)", "ALKA OFFICE RENT (FAD)", "ALKA OFFICE BIJLI BILL (FAD)", "ALKA OFFICE WIFI (FAD)", "ALKA OFFICE NEWS PAPER (FAD)", "OFFICE EXP (WATER-TEA-COLD DRINK)", "ASAD SALARY", "AREEB SALARY", "FAISAL SALARY", "MAID SALARY", "NASEEM SALARY"],
      data: [0, 0, 13105.9, 3460, 0, 0, 0, 0, 0, 0, 12000, 15000, 0, 10000, 25000]
    }
  };

  const monthContainer = document.getElementById("monthButtons");
  const sortToggleBtn = document.getElementById("sortToggleBtn");

  let isDescending = false;
  let currentSelectedMonth = currentMonth;
  let chart;

  months.forEach(month => {
    const btn = document.createElement("button");
    btn.textContent = month;
    btn.classList.toggle("active", month === currentMonth);
    btn.onclick = () => {
      currentSelectedMonth = month;
      loadChart(month);
    };
    monthContainer.appendChild(btn);
  });

  sortToggleBtn.onclick = () => {
    isDescending = !isDescending;
    sortToggleBtn.textContent = isDescending ? "Sort Ascending" : "Sort Descending";
    loadChart(currentSelectedMonth);
  };

  function loadChart(month) {
    document.querySelectorAll(".month-buttons button").forEach(btn => {
      btn.classList.toggle("active", btn.textContent === month);
    });

    const ctx = document.getElementById('expensesChart').getContext('2d');
    const monthData = expensesData[month] || { labels: [], data: [] };

    let combined = monthData.labels.map((label, i) => ({
      label,
      value: monthData.data[i]
    }));

    if (isDescending) {
      combined.sort((a, b) => b.value - a.value);
    }

    const labels = combined.map(item => item.label);
    const data = combined.map(item => item.value);

    const colors = [
      '#ffb6b9', '#a0e7e5', '#b4f8c8', '#fbe7c6', '#ffdac1',
      '#e2f0cb', '#b5ead7', '#c7ceea', '#f7d6e0', '#d0e8f2',
      '#c2f9bb', '#fbe4c3', '#ffd6a5', '#fdffb6', '#caffbf'
    ];

    if (chart) chart.destroy();

    chart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels,
        datasets: [{
          label: 'Expenses',
          data,
          backgroundColor: colors,
          borderRadius: 20,
          barThickness: 70,
          categoryPercentage: 1.0,
          barPercentage: 0.9
        }]
      },
      options: {
        indexAxis: 'y',
        responsive: true,
        plugins: {
          legend: { display: false },
          tooltip: { enabled: false },
          datalabels: {
            anchor: 'center',
            align: 'center',
            color: '#000',
            font: {
              weight: 'bold',
              size: 16
            },
            formatter: value => value
          }
        },
        scales: {
          x: {
            ticks: { color: '#555' },
            grid: { color: '#ddd' }
          },
          y: {
            ticks: {
              font: { size: 23, weight: 'bold' },
              color: '#333',
              padding: 5
            },
            grid: { display: false }
          }
        }
      },
      plugins: [ChartDataLabels]
    });
  }

  loadChart(currentMonth);
</script>

</body>
</html>
